<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ocean Creatures Word Scramble</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500;600;700&display=swap');
        
        body {
            font-family: 'Quicksand', sans-serif;
            background: linear-gradient(135deg, #0ea5e9, #2563eb);
            min-height: 100vh;
        }
        
        .ocean-bg {
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Cpath fill='%230ea5e9' fill-opacity='0.1' d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z'%3E%3C/path%3E%3C/svg%3E");
        }
        
        .sea-creatures-container {`
            cursor: pointer;
            transition: transform 0.3s ease;
        }
        
        .sea-creatures-container:hover {
            transform: scale(1.02);
        }
        
        .sea-creatures-container:hover .play-button {
            transform: scale(1.1);
        }
        
        .play-button {
            transition: transform 0.3s ease;
        }
    </style>
</head>
<body class="flex items-center justify-center p-4">
    <div class="bg-white rounded-xl shadow-2xl w-full max-w-2xl p-6 md:p-8 ocean-bg">
        <div class="text-center mb-6">
            <h1 class="text-3xl font-bold text-blue-700 mb-2">Ocean Creatures</h1>
            <p class="text-gray-600">Click on the image to play the word scramble game!</p>
        </div>
        
        <div class="sea-creatures-container relative rounded-xl overflow-hidden shadow-lg" onclick="openGame()">
            <div class="absolute inset-0 bg-gradient-to-t from-black/70 to-transparent z-10"></div>
            
            <!-- SVG Ocean Scene -->
            <div class="bg-gradient-to-b from-sky-300 to-blue-600 p-6 min-h-[400px] relative">
                <!-- Sun -->
                <div class="absolute top-6 right-8 w-16 h-16 bg-yellow-300 rounded-full shadow-lg"></div>
                
                <!-- Waves -->
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320" class="absolute bottom-0 left-0">
                    <path fill="#0099ff" fill-opacity="0.5" d="M0,224L48,213.3C96,203,192,181,288,181.3C384,181,480,203,576,202.7C672,203,768,181,864,181.3C960,181,1056,203,1152,208C1248,213,1344,203,1392,197.3L1440,192L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path>
                </svg>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320" class="absolute bottom-0 left-0">
                    <path fill="#0066ff" fill-opacity="0.7" d="M0,288L48,272C96,256,192,224,288,213.3C384,203,480,213,576,229.3C672,245,768,267,864,261.3C960,256,1056,224,1152,218.7C1248,213,1344,235,1392,245.3L1440,256L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path>
                </svg>
                
                <!-- Clownfish -->
                <div class="absolute left-[15%] top-[40%] transform -translate-y-1/2">
                    <svg width="60" height="40" viewBox="0 0 60 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M50 20C50 27.5 40 35 25 35C10 35 0 27.5 0 20C0 12.5 10 5 25 5C40 5 50 12.5 50 20Z" fill="#FF7F00"/>
                        <path d="M50 20C50 27.5 40 35 25 35C10 35 0 27.5 0 20C0 12.5 10 5 25 5C40 5 50 12.5 50 20Z" fill="#FF7F00"/>
                        <path d="M15 20C15 22.5 12.5 25 10 25C7.5 25 5 22.5 5 20C5 17.5 7.5 15 10 15C12.5 15 15 17.5 15 20Z" fill="white"/>
                        <path d="M35 20C35 22.5 32.5 25 30 25C27.5 25 25 22.5 25 20C25 17.5 27.5 15 30 15C32.5 15 35 17.5 35 20Z" fill="white"/>
                        <path d="M12 20C12 21.1 11.1 22 10 22C8.9 22 8 21.1 8 20C8 18.9 8.9 18 10 18C11.1 18 12 18.9 12 20Z" fill="black"/>
                        <path d="M32 20C32 21.1 31.1 22 30 22C28.9 22 28 21.1 28 20C28 18.9 28.9 18 30 18C31.1 18 32 18.9 32 20Z" fill="black"/>
                        <path d="M50 20C50 20 55 15 60 20C55 25 50 20 50 20Z" fill="#FF7F00"/>
                    </svg>
                </div>
                
                <!-- Turtle -->
                <div class="absolute right-[20%] top-[60%]">
                    <svg width="70" height="50" viewBox="0 0 70 50" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <ellipse cx="35" cy="25" rx="25" ry="20" fill="#2E8B57"/>
                        <path d="M35 5C45 5 55 15 55 25C55 35 45 45 35 45C25 45 15 35 15 25C15 15 25 5 35 5Z" fill="#3CB371"/>
                        <path d="M35 10C42.5 10 50 17.5 50 25C50 32.5 42.5 40 35 40C27.5 40 20 32.5 20 25C20 17.5 27.5 10 35 10Z" fill="#2E8B57"/>
                        <path d="M10 25C10 25 5 20 0 25C5 30 10 25 10 25Z" fill="#3CB371"/>
                        <path d="M60 25C60 25 65 20 70 25C65 30 60 25 60 25Z" fill="#3CB371"/>
                        <path d="M35 45C35 45 30 50 35 50C40 50 35 45 35 45Z" fill="#3CB371"/>
                        <path d="M35 5C35 5 30 0 35 0C40 0 35 5 35 5Z" fill="#3CB371"/>
                    </svg>
                </div>
                
                <!-- Starfish -->
                <div class="absolute left-[30%] bottom-[15%]">
                    <svg width="50" height="50" viewBox="0 0 50 50" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M25 0L30 20L50 25L30 30L25 50L20 30L0 25L20 20L25 0Z" fill="#FF6B6B"/>
                    </svg>
                </div>
                
                <!-- Jellyfish -->
                <div class="absolute right-[35%] top-[30%]">
                    <svg width="40" height="60" viewBox="0 0 40 60" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M20 0C31.0457 0 40 8.95431 40 20C40 31.0457 31.0457 40 20 40C8.95431 40 0 31.0457 0 20C0 8.95431 8.95431 0 20 0Z" fill="#9370DB"/>
                        <path d="M10 40C10 40 5 60 10 60C15 60 10 40 10 40Z" fill="#9370DB"/>
                        <path d="M20 40C20 40 15 60 20 60C25 60 20 40 20 40Z" fill="#9370DB"/>
                        <path d="M30 40C30 40 25 60 30 60C35 60 30 40 30 40Z" fill="#9370DB"/>
                    </svg>
                </div>
                
                <!-- Seahorse -->
                <div class="absolute left-[60%] top-[50%]">
                    <svg width="30" height="60" viewBox="0 0 30 60" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M20 10C25.5228 10 30 14.4772 30 20C30 25.5228 25.5228 30 20 30C14.4772 30 10 25.5228 10 20C10 14.4772 14.4772 10 20 10Z" fill="#FFD700"/>
                        <path d="M20 30C20 30 25 40 20 50C15 60 10 50 10 40C10 30 20 30 20 30Z" fill="#FFD700"/>
                        <path d="M20 10C20 10 15 0 10 0C5 0 0 5 0 10C0 15 5 20 10 20C15 20 20 15 20 10Z" fill="#FFD700"/>
                    </svg>
                </div>
            </div>
            
            <!-- Play Button Overlay -->
            <div class="absolute inset-0 flex items-center justify-center z-20">
                <div class="play-button bg-white/90 rounded-full p-4 shadow-lg">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z" />
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                </div>
            </div>
            
            <!-- Game Title Overlay -->
            <div class="absolute bottom-0 left-0 right-0 p-4 text-white z-20">
                <h2 class="text-2xl font-bold">Ocean Creatures Word Scramble</h2>
                <p class="text-sm">Unscramble all 6 words to win points!</p>
            </div>
        </div>
        
        <div class="mt-6 text-center text-gray-600">
            <p>Click to play! Unscramble all 6 ocean creature words to earn points.</p>
        </div>
    </div>

    <script>
        function openGame() {
            // Create a new window with the game
            const gameWindow = window.open('', '_blank');
            
            // Write the game HTML to the new window
            gameWindow.document.write(`
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ocean Creatures Word Scramble</title>
    <script src="https://cdn.tailwindcss.com"><\/script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500;600;700&display=swap');
        
        body {
            font-family: 'Quicksand', sans-serif;
            background: linear-gradient(135deg, #0ea5e9, #2563eb);
            min-height: 100vh;
        }
        
        .letter-tile {
            transition: all 0.2s ease;
        }
        
        .letter-tile:hover {
            transform: translateY(-3px);
        }
        
        .correct-answer {
            animation: pulse 1s;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .shake {
            animation: shake 0.5s;
        }
        
        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            50% { transform: translateX(5px); }
            75% { transform: translateX(-5px); }
            100% { transform: translateX(0); }
        }
        
        .ocean-bg {
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Cpath fill='%230ea5e9' fill-opacity='0.1' d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z'%3E%3C/path%3E%3C/svg%3E");
        }
        
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: #f00;
            border-radius: 50%;
            animation: fall 3s ease-in infinite;
        }
        
        @keyframes fall {
            0% { transform: translateY(-100vh) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(360deg); opacity: 0; }
        }
    </style>
</head>
<body class="flex items-center justify-center p-4">
    <div class="bg-white rounded-xl shadow-2xl w-full max-w-4xl p-6 md:p-8 ocean-bg">
        <div class="text-center mb-6">
            <h1 class="text-3xl font-bold text-blue-700 mb-2">Ocean Creatures Word Scramble</h1>
            <p class="text-gray-600">Unscramble all 6 words to win points!</p>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6" id="puzzle-container">
            <!-- Word puzzles will be inserted here -->
        </div>
        
        <div class="mt-6 flex justify-center gap-4">
            <button id="check-btn" class="bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-8 rounded-full shadow-md transition-all">
                Check All Answers
            </button>
            <button id="reset-btn" class="bg-gray-200 hover:bg-gray-300 text-gray-700 font-medium py-2 px-8 rounded-full shadow-md transition-all">
                Reset All
            </button>
        </div>
        
        <div class="mt-6 flex justify-between items-center">
            <div>
                <p class="text-gray-700">Score: <span id="score" class="font-bold">0</span></p>
                <p class="text-gray-700">Solved Sets: <span id="solved-sets" class="font-bold">0</span> / 2</p>
            </div>
            <button id="next-set-btn" class="bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-6 rounded-full shadow-md transition-all">
                Next Set
            </button>
        </div>
        
        <div id="message" class="mt-4 text-center font-medium text-lg hidden"></div>
        
        <div id="completion-message" class="mt-6 text-center font-bold text-xl text-green-600 hidden">
            Congratulations! You've solved all the words! 🎉
        </div>
        
        <div id="confetti-container" class="fixed inset-0 pointer-events-none hidden"></div>
    </div>

    <script>
        // Game words - ocean creatures
        const words = [
            "clownfish",
            "dolphin",
            "seahorse",
            "urchin",
            "turtle",
            "starfish",
            "squid",
            "jellyfish",
            "bluewhale",
            "lobster"
        ];
        
        let score = 0;
        let solvedSets = 0;
        let currentSetIndex = 0;
        const wordsPerSet = 6;
        let selectedPuzzle = null;
        
        const puzzleContainer = document.getElementById("puzzle-container");
        const scoreEl = document.getElementById("score");
        const solvedSetsEl = document.getElementById("solved-sets");
        const checkBtn = document.getElementById("check-btn");
        const resetBtn = document.getElementById("reset-btn");
        const nextSetBtn = document.getElementById("next-set-btn");
        const messageEl = document.getElementById("message");
        const completionMessage = document.getElementById("completion-message");
        const confettiContainer = document.getElementById("confetti-container");
        
        // Scramble a word
        function scrambleWord(word) {
            const letters = word.split("");
            
            // Shuffle letters
            for (let i = letters.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [letters[i], letters[j]] = [letters[j], letters[i]];
            }
            
            // Make sure scrambled word is different from original
            if (letters.join("") === word) {
                return scrambleWord(word);
            }
            
            return letters.join("");
        }
        
        // Create word puzzles for current set
        function createWordPuzzles() {
            puzzleContainer.innerHTML = "";
            
            const startIndex = currentSetIndex * wordsPerSet;
            const endIndex = Math.min(startIndex + wordsPerSet, words.length);
            
            for (let i = startIndex; i < endIndex; i++) {
                const word = words[i];
                const scrambled = scrambleWord(word);
                
                const puzzleEl = document.createElement("div");
                puzzleEl.className = "bg-blue-50 rounded-lg p-4 shadow-md";
                puzzleEl.dataset.word = word;
                puzzleEl.dataset.index = i;
                puzzleEl.dataset.solved = "false";
                
                // Create puzzle header
                const puzzleHeader = document.createElement("div");
                puzzleHeader.className = "flex justify-between items-center mb-3";
                
                const puzzleNumber = document.createElement("span");
                puzzleNumber.className = "font-bold text-blue-700";
                puzzleNumber.textContent = \`Puzzle \${i - startIndex + 1}\`;
                
                const puzzleStatus = document.createElement("span");
                puzzleStatus.className = "text-sm font-medium text-gray-500";
                puzzleStatus.textContent = "Unsolved";
                puzzleStatus.dataset.status = "status";
                
                puzzleHeader.appendChild(puzzleNumber);
                puzzleHeader.appendChild(puzzleStatus);
                puzzleEl.appendChild(puzzleHeader);
                
                // Create scrambled word container
                const scrambledContainer = document.createElement("div");
                scrambledContainer.className = "flex flex-wrap justify-center gap-1 mb-4";
                scrambledContainer.dataset.scrambled = "container";
                
                scrambled.split("").forEach((letter, index) => {
                    const letterTile = document.createElement("div");
                    letterTile.className = "letter-tile bg-white border-2 border-blue-300 rounded-lg w-8 h-8 flex items-center justify-center text-md font-bold text-blue-700 cursor-pointer shadow-sm";
                    letterTile.textContent = letter.toUpperCase();
                    letterTile.dataset.letter = letter;
                    letterTile.dataset.index = index;
                    
                    letterTile.addEventListener("click", () => {
                        if (!letterTile.classList.contains("opacity-0") && puzzleEl.dataset.solved === "false") {
                            selectLetter(puzzleEl, letter, index);
                            letterTile.classList.add("opacity-0");
                        }
                    });
                    
                    scrambledContainer.appendChild(letterTile);
                });
                
                puzzleEl.appendChild(scrambledContainer);
                
                // Create answer area
                const answerContainer = document.createElement("div");
                answerContainer.className = "flex flex-wrap justify-center gap-1 min-h-12 mb-2 border-2 border-dashed border-blue-200 rounded-lg p-2";
                answerContainer.dataset.answer = "container";
                puzzleEl.appendChild(answerContainer);
                
                // Make puzzle selectable
                puzzleEl.addEventListener("click", (e) => {
                    // Don't select if clicking on a letter tile
                    if (e.target.classList.contains("letter-tile")) return;
                    
                    if (puzzleEl.dataset.solved === "false") {
                        selectPuzzle(puzzleEl);
                    }
                });
                
                puzzleContainer.appendChild(puzzleEl);
            }
            
            // Update next set button visibility
            if (endIndex >= words.length) {
                nextSetBtn.textContent = "Start Over";
            } else {
                nextSetBtn.textContent = "Next Set";
            }
            
            // Clear message
            messageEl.classList.add("hidden");
        }
        
        // Select a puzzle
        function selectPuzzle(puzzleEl) {
            // Deselect previous puzzle if any
            if (selectedPuzzle) {
                selectedPuzzle.classList.remove("ring-4", "ring-blue-400");
            }
            
            // Select new puzzle
            selectedPuzzle = puzzleEl;
            puzzleEl.classList.add("ring-4", "ring-blue-400");
        }
        
        // Select a letter
        function selectLetter(puzzleEl, letter, index) {
            const answerContainer = puzzleEl.querySelector('[data-answer="container"]');
            
            const letterTile = document.createElement("div");
            letterTile.className = "letter-tile bg-blue-100 border-2 border-blue-400 rounded-lg w-8 h-8 flex items-center justify-center text-md font-bold text-blue-700 cursor-pointer shadow-sm";
            letterTile.textContent = letter.toUpperCase();
            letterTile.dataset.letter = letter;
            letterTile.dataset.originalIndex = index;
            
            letterTile.addEventListener("click", () => {
                if (puzzleEl.dataset.solved === "false") {
                    returnLetter(puzzleEl, letterTile);
                }
            });
            
            answerContainer.appendChild(letterTile);
            
            // Auto-select the puzzle when adding letters
            selectPuzzle(puzzleEl);
        }
        
        // Return a letter to the scrambled word
        function returnLetter(puzzleEl, letterTile) {
            const originalIndex = letterTile.dataset.originalIndex;
            const scrambledContainer = puzzleEl.querySelector('[data-scrambled="container"]');
            const scrambledTiles = scrambledContainer.querySelectorAll(".letter-tile");
            
            // Make the original letter visible again
            scrambledTiles[originalIndex].classList.remove("opacity-0");
            
            // Remove the letter from answer area
            letterTile.remove();
        }
        
        // Check answers for all puzzles in current set
        function checkAnswers() {
            let correctCount = 0;
            const puzzles = puzzleContainer.querySelectorAll(".bg-blue-50, .bg-green-50");
            const totalPuzzles = puzzles.length;
            
            puzzles.forEach(puzzleEl => {
                if (puzzleEl.dataset.solved === "true") {
                    correctCount++;
                    return;
                }
                
                const word = puzzleEl.dataset.word;
                const answerContainer = puzzleEl.querySelector('[data-answer="container"]');
                const answerTiles = answerContainer.querySelectorAll(".letter-tile");
                const statusEl = puzzleEl.querySelector('[data-status="status"]');
                
                // Get user's answer
                let userAnswer = "";
                answerTiles.forEach(tile => {
                    userAnswer += tile.dataset.letter;
                });
                
                if (userAnswer === word) {
                    // Correct answer
                    puzzleEl.dataset.solved = "true";
                    puzzleEl.classList.remove("bg-blue-50");
                    puzzleEl.classList.add("bg-green-50");
                    statusEl.textContent = "Solved!";
                    statusEl.className = "text-sm font-medium text-green-600";
                    
                    // Add animation to answer area
                    answerContainer.classList.add("correct-answer");
                    setTimeout(() => {
                        answerContainer.classList.remove("correct-answer");
                    }, 1000);
                    
                    correctCount++;
                } else if (userAnswer.length > 0) {
                    // Wrong answer
                    answerContainer.classList.add("shake");
                    setTimeout(() => {
                        answerContainer.classList.remove("shake");
                    }, 500);
                }
            });
            
            // Show message based on results
            if (correctCount === totalPuzzles) {
                // All puzzles solved in this set!
                score += 10; // Award 10 points for solving all puzzles in one go
                solvedSets += 1;
                scoreEl.textContent = score;
                solvedSetsEl.textContent = solvedSets;
                
                messageEl.textContent = "Perfect! All puzzles solved in this set! +10 points";
                messageEl.className = "mt-4 text-center font-medium text-lg text-green-600";
                
                // Show confetti
                showConfetti();
            } else if (correctCount > 0) {
                messageEl.textContent = \`You solved \${correctCount} out of \${totalPuzzles} puzzles. Solve all to earn points!\`;
                messageEl.className = "mt-4 text-center font-medium text-lg text-blue-600";
            } else {
                messageEl.textContent = "Keep trying! You can do it!";
                messageEl.className = "mt-4 text-center font-medium text-lg text-orange-600";
            }
            messageEl.classList.remove("hidden");
            
            // Check if all sets are solved
            if (solvedSets === Math.ceil(words.length / wordsPerSet)) {
                completionMessage.classList.remove("hidden");
            }
        }
        
        // Reset all puzzles in current set
        function resetPuzzles() {
            const puzzles = puzzleContainer.querySelectorAll(".bg-blue-50");
            puzzles.forEach(puzzleEl => {
                if (puzzleEl.dataset.solved === "false") {
                    const scrambledContainer = puzzleEl.querySelector('[data-scrambled="container"]');
                    const answerContainer = puzzleEl.querySelector('[data-answer="container"]');
                    
                    // Make all scrambled letters visible
                    const scrambledTiles = scrambledContainer.querySelectorAll(".letter-tile");
                    scrambledTiles.forEach(tile => {
                        tile.classList.remove("opacity-0");
                    });
                    
                    // Clear answer area
                    answerContainer.innerHTML = "";
                }
            });
            
            // Clear message
            messageEl.classList.add("hidden");
        }
        
        // Load next set of puzzles
        function loadNextSet() {
            currentSetIndex++;
            if (currentSetIndex * wordsPerSet >= words.length) {
                currentSetIndex = 0;
            }
            
            createWordPuzzles();
            selectedPuzzle = null;
            messageEl.classList.add("hidden");
        }
        
        // Show confetti animation
        function showConfetti() {
            confettiContainer.innerHTML = '';
            confettiContainer.classList.remove('hidden');
            
            const colors = ['#ff0000', '#00ff00', '#0000ff', '#ffff00', '#ff00ff', '#00ffff'];
            
            for (let i = 0; i < 100; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = \`\${Math.random() * 100}%\`;
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.width = \`\${Math.random() * 10 + 5}px\`;
                confetti.style.height = \`\${Math.random() * 10 + 5}px\`;
                confetti.style.animationDelay = \`\${Math.random() * 2}s\`;
                
                confettiContainer.appendChild(confetti);
            }
            
            setTimeout(() => {
                confettiContainer.classList.add('hidden');
            }, 3000);
        }
        
        // Event listeners
        checkBtn.addEventListener("click", checkAnswers);
        resetBtn.addEventListener("click", resetPuzzles);
        nextSetBtn.addEventListener("click", loadNextSet);
        
        // Initialize game
        createWordPuzzles();
    <\/script>
</body>
</html>
            `);
            
            // Close the document to finish loading
            gameWindow.document.close();
        }
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'945514b0c15ac6ee',t:'MTc0ODE3NjYxMi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
